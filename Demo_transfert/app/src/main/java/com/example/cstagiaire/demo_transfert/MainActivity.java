package com.example.cstagiaire.demo_transfert;

import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;

import java.util.ArrayList;

public class MainActivity extends AppCompatActivity {

    TextView text1;
    TextView infos;
    ArrayList<String> selections ;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        text1 = (TextView)findViewById(R.id.string);
        infos = (TextView)findViewById(R.id.infos);
        selections = new ArrayList(){};
        // page vide
        String binaire = "0xFF01142B000A02020201192997014D6963726F736F66742E5765622E507265766965772E55492E436F6E74726F6C732E57656250617274732E576562506172744D616E616765722C204D6963726F736F66742E5765622E507265766965772C2056657273696F6E3D312E332E36313032352E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D3331626633383536616433363465333505055F5F77706D6602011E1057656250617274537461746555736572142B0044051767777044646C5F54657374416E6E697665727361697265050C576562506172745A6F6E65316667052367777044646C5F54657374416273656E636573486F73706974616C69736174696F6E73050C576562506172745A6F6E6531666705176777704576616C756174696F6E735265616C6973656573050C576562506172745A6F6E6531666705196777705563496E666F726D6174696F6E734D794D6564676963050C576562506172745A6F6E6531666705156777704167656E64614E6F6E50726F6772616D6D65050C576562506172745A6F6E65316667051B67777044646C5F546573744F72646F6E6E616E63657346616C7365050C576562506172745A6F6E65326667051A67777044646C5F546573744F72646F6E6E616E63657354727565050C576562506172745A6F6E65326667051B67777044646C5F4F72646F6E6E616E6365446174654C696D697465050C576562506172745A6F6E653266670512677770526573756C746174416E616C797365050C576562506172745A6F6E6532666705096777704167656E6461050C576562506172745A6F6E6531666705116777704C697374655265736964616E7473050C576562506172745A6F6E65316667052167777044646C5F546573745472616E736D697373696F6E4E617272617469766531050C576562506172745A6F6E65316667052067777044646C5F546573745472616E736D697373696F6E734369626C65657331050C576562506172745A6F6E65316667051767777044646C5F546573744C6973746543687574657331050C576562506172745A6F6E65336667051967777044646C5F546573744C69737465457363617272657331050C576562506172745A6F6E653366670515677770536F696E734E6F6E506C616E696669657331050C576562506172745A6F6E653266670513677770536F696E734E6F6E67656E6572657331050C576562506172745A6F6E653366676868";
        // page Aniversaire et Absences
        String binaire1 = "0xFF01142B0Absences00A02020201192997014D6963726F736F66742E5765622E507265766965772E55492E436F6E74726F6C732E57656250617274732E576562506172744D616E616765722C204D6963726F736F66742E5765622E507265766965772C2056657273696F6E3D312E332E36313032352E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D3331626633383536616433363465333505055F5F77706D6602011E1057656250617274537461746555736572142B0044051767777044646C5F54657374416E6E697665727361697265050C576562506172745A6F6E65316668052367777044646C5F54657374416273656E636573486F73706974616C69736174696F6E73050C576562506172745A6F6E6532666805176777704576616C756174696F6E735265616C6973656573050C576562506172745A6F6E6531666705196777705563496E666F726D6174696F6E734D794D6564676963050C576562506172745A6F6E6531666705156777704167656E64614E6F6E50726F6772616D6D65050C576562506172745A6F6E65316667051B67777044646C5F546573744F72646F6E6E616E63657346616C7365050C576562506172745A6F6E65326667051A67777044646C5F546573744F72646F6E6E616E63657354727565050C576562506172745A6F6E65326667051B67777044646C5F4F72646F6E6E616E6365446174654C696D697465050C576562506172745A6F6E653266670512677770526573756C746174416E616C797365050C576562506172745A6F6E6532666705096777704167656E6461050C576562506172745A6F6E6531666705116777704C697374655265736964616E7473050C576562506172745A6F6E65316667052167777044646C5F546573745472616E736D697373696F6E4E617272617469766531050C576562506172745A6F6E65316667052067777044646C5F546573745472616E736D697373696F6E734369626C65657331050C576562506172745A6F6E65316667051767777044646C5F546573744C6973746543687574657331050C576562506172745A6F6E65336667051967777044646C5F546573744C69737465457363617272657331050C576562506172745A6F6E653366670515677770536F696E734E6F6E506C616E696669657331050C576562506172745A6F6E653266670513677770536F696E734E6F6E67656E6572657331050C576562506172745A6F6E653366676868";
        // Absences , Evalution , Information , AgendaNonProgramme , Ordonnance , Anniversaire , ListeDeSoin
        String binaire2 = "0xFF01142B000A02020201192997014D6963726F736F66742E5765622E507265766965772E55492E436F6E74726F6C732E57656250617274732E576562506172744D616E616765722C204D6963726F736F66742E5765622E507265766965772C2056657273696F6E3D312E332E36313032352E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D3331626633383536616433363465333505055F5F77706D6602011E1057656250617274537461746555736572142B0044051767777044646C5F54657374416E6E697665727361697265050C576562506172745A6F6E6531020568052367777044646C5F54657374416273656E636573486F73706974616C69736174696F6E73050C576562506172745A6F6E6531666805176777704576616C756174696F6E735265616C6973656573050C576562506172745A6F6E653102016805196777705563496E666F726D6174696F6E734D794D6564676963050C576562506172745A6F6E653102026805156777704167656E64614E6F6E50726F6772616D6D65050C576562506172745A6F6E6531020368051B67777044646C5F546573744F72646F6E6E616E63657346616C7365050C576562506172745A6F6E6531020468051A67777044646C5F546573744F72646F6E6E616E63657354727565050C576562506172745A6F6E65326667051B67777044646C5F4F72646F6E6E616E6365446174654C696D697465050C576562506172745A6F6E653266670512677770526573756C746174416E616C797365050C576562506172745A6F6E6532666705096777704167656E6461050C576562506172745A6F6E6531666705116777704C697374655265736964616E7473050C576562506172745A6F6E6531020668052167777044646C5F546573745472616E736D697373696F6E4E617272617469766531050C576562506172745A6F6E65316667052067777044646C5F546573745472616E736D697373696F6E734369626C65657331050C576562506172745A6F6E65316667051767777044646C5F546573744C6973746543687574657331050C576562506172745A6F6E65336667051967777044646C5F546573744C69737465457363617272657331050C576562506172745A6F6E653366670515677770536F696E734E6F6E506C616E696669657331050C576562506172745A6F6E653266670513677770536F696E734E6F6E67656E6572657331050C576562506172745A6F6E653366676868";
        // Agenda
        String binaire3 = "0xFF01142B000A02020201192997014D6963726F736F66742E5765622E507265766965772E55492E436F6E74726F6C732E57656250617274732E576562506172744D616E616765722C204D6963726F736F66742E5765622E507265766965772C2056657273696F6E3D312E332E36313032352E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D3331626633383536616433363465333505055F5F77706D6602011E1057656250617274537461746555736572142B0044051767777044646C5F54657374416E6E697665727361697265050C576562506172745A6F6E65316667052367777044646C5F54657374416273656E636573486F73706974616C69736174696F6E73050C576562506172745A6F6E6531666705176777704576616C756174696F6E735265616C6973656573050C576562506172745A6F6E6531666705196777705563496E666F726D6174696F6E734D794D6564676963050C576562506172745A6F6E6531666705156777704167656E64614E6F6E50726F6772616D6D65050C576562506172745A6F6E65316667051B67777044646C5F546573744F72646F6E6E616E63657346616C7365050C576562506172745A6F6E65316667051A67777044646C5F546573744F72646F6E6E616E63657354727565050C576562506172745A6F6E65326667051B67777044646C5F4F72646F6E6E616E6365446174654C696D697465050C576562506172745A6F6E653266670512677770526573756C746174416E616C797365050C576562506172745A6F6E6532666705096777704167656E6461050C576562506172745A6F6E6531666805116777704C697374655265736964616E7473050C576562506172745A6F6E65316667052167777044646C5F546573745472616E736D697373696F6E4E617272617469766531050C576562506172745A6F6E65316667052067777044646C5F546573745472616E736D697373696F6E734369626C65657331050C576562506172745A6F6E65316667051767777044646C5F546573744C6973746543687574657331050C576562506172745A6F6E65336667051967777044646C5F546573744C69737465457363617272657331050C576562506172745A6F6E653366670515677770536F696E734E6F6E506C616E696669657331050C576562506172745A6F6E653266670513677770536F696E734E6F6E67656E6572657331050C576562506172745A6F6E653366676868";
        // Tout les 17 blocs
        String binaire4 = "0xFF01142B000A02020201192997014D6963726F736F66742E5765622E507265766965772E55492E436F6E74726F6C732E57656250617274732E576562506172744D616E616765722C204D6963726F736F66742E5765622E507265766965772C2056657273696F6E3D312E332E36313032352E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D3331626633383536616433363465333505055F5F77706D6602011E1057656250617274537461746555736572142B0044051767777044646C5F54657374416E6E697665727361697265050C576562506172745A6F6E65316668052367777044646C5F54657374416273656E636573486F73706974616C69736174696F6E73050C576562506172745A6F6E653102016805176777704576616C756174696F6E735265616C6973656573050C576562506172745A6F6E653102026805196777705563496E666F726D6174696F6E734D794D6564676963050C576562506172745A6F6E653102036805156777704167656E64614E6F6E50726F6772616D6D65050C576562506172745A6F6E6531020468051B67777044646C5F546573744F72646F6E6E616E63657346616C7365050C576562506172745A6F6E6531020568051A67777044646C5F546573744F72646F6E6E616E63657354727565050C576562506172745A6F6E6531020668051B67777044646C5F4F72646F6E6E616E6365446174654C696D697465050C576562506172745A6F6E65310207680512677770526573756C746174416E616C797365050C576562506172745A6F6E653102086805096777704167656E6461050C576562506172745A6F6E653102096805116777704C697374655265736964616E7473050C576562506172745A6F6E6531020A68052167777044646C5F546573745472616E736D697373696F6E4E617272617469766531050C576562506172745A6F6E6531020B68052067777044646C5F546573745472616E736D697373696F6E734369626C65657331050C576562506172745A6F6E6531020C68051767777044646C5F546573744C6973746543687574657331050C576562506172745A6F6E6531020D68051967777044646C5F546573744C69737465457363617272657331050C576562506172745A6F6E6531020E680515677770536F696E734E6F6E506C616E696669657331050C576562506172745A6F6E6531020F680513677770536F696E734E6F6E67656E6572657331050C576562506172745A6F6E65310210686868";
        // Sélectionner 18 sauf Aganda et SoinNonGénérie
        String binaire5 ="0xFF01142B000A02020201192997014D6963726F736F66742E5765622E507265766965772E55492E436F6E74726F6C732E57656250617274732E576562506172744D616E616765722C204D6963726F736F66742E5765622E507265766965772C2056657273696F6E3D312E332E36313032352E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D3331626633383536616433363465333505055F5F77706D6602011E1057656250617274537461746555736572142B0044051767777044646C5F54657374416E6E697665727361697265050C576562506172745A6F6E65316668052367777044646C5F54657374416273656E636573486F73706974616C69736174696F6E73050C576562506172745A6F6E653102016805176777704576616C756174696F6E735265616C6973656573050C576562506172745A6F6E653102026805196777705563496E666F726D6174696F6E734D794D6564676963050C576562506172745A6F6E653102036805156777704167656E64614E6F6E50726F6772616D6D65050C576562506172745A6F6E6531020468051B67777044646C5F546573744F72646F6E6E616E63657346616C7365050C576562506172745A6F6E6531020568051A67777044646C5F546573744F72646F6E6E616E63657354727565050C576562506172745A6F6E6531020668051B67777044646C5F4F72646F6E6E616E6365446174654C696D697465050C576562506172745A6F6E65310207680512677770526573756C746174416E616C797365050C576562506172745A6F6E653102086805096777704167656E6461050C576562506172745A6F6E653102096705116777704C697374655265736964616E7473050C576562506172745A6F6E6531020968052167777044646C5F546573745472616E736D697373696F6E4E617272617469766531050C576562506172745A6F6E6531020A68052067777044646C5F546573745472616E736D697373696F6E734369626C65657331050C576562506172745A6F6E6531020B68051767777044646C5F546573744C6973746543687574657331050C576562506172745A6F6E6531020C68051967777044646C5F546573744C69737465457363617272657331050C576562506172745A6F6E6531020D680515677770536F696E734E6F6E506C616E696669657331050C576562506172745A6F6E6531020E680513677770536F696E734E6F6E67656E6572657331050C576562506172745A6F6E65310210676868";
        // sélectionner 11 sauf  Anniversaires,Absences,Evaluations réalisées,Informations,Agenda,Soins non généré
        String binaire6 = "0xFF01142B000A02020201192997014D6963726F736F66742E5765622E507265766965772E55492E436F6E74726F6C732E57656250617274732E576562506172744D616E616765722C204D6963726F736F66742E5765622E507265766965772C2056657273696F6E3D312E332E36313032352E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D3331626633383536616433363465333505055F5F77706D6602011E1057656250617274537461746555736572142B0044051767777044646C5F54657374416E6E697665727361697265050C576562506172745A6F6E65316667052367777044646C5F54657374416273656E636573486F73706974616C69736174696F6E73050C576562506172745A6F6E6531666705176777704576616C756174696F6E735265616C6973656573050C576562506172745A6F6E6531666705196777705563496E666F726D6174696F6E734D794D6564676963050C576562506172745A6F6E6531666705156777704167656E64614E6F6E50726F6772616D6D65050C576562506172745A6F6E65316668051B67777044646C5F546573744F72646F6E6E616E63657346616C7365050C576562506172745A6F6E6531020168051A67777044646C5F546573744F72646F6E6E616E63657354727565050C576562506172745A6F6E6531020268051B67777044646C5F4F72646F6E6E616E6365446174654C696D697465050C576562506172745A6F6E65310203680512677770526573756C746174416E616C797365050C576562506172745A6F6E653102046805096777704167656E6461050C576562506172745A6F6E653102096705116777704C697374655265736964616E7473050C576562506172745A6F6E6531020568052167777044646C5F546573745472616E736D697373696F6E4E617272617469766531050C576562506172745A6F6E6531020668052067777044646C5F546573745472616E736D697373696F6E734369626C65657331050C576562506172745A6F6E6531020768051767777044646C5F546573744C6973746543687574657331050C576562506172745A6F6E6531020868051967777044646C5F546573744C69737465457363617272657331050C576562506172745A6F6E65310209680515677770536F696E734E6F6E506C616E696669657331050C576562506172745A6F6E6531020A680513677770536F696E734E6F6E67656E6572657331050C576562506172745A6F6E65310210676868";
        int a =237;
        int b = 239;
        //infos.setText("String_1("+a+","+b+") , String_2("+a+","+b+")");
        //text1.setText(toStringHex(binaire1).substring(a,b)+" \n"+toStringHex(binaire2).substring(a,b));
        //infos.setText(toStringHex(binaire1).substring(a,b).equals(toStringHex(binaire2).substring(a,b))+"");
        text1.setText(getAfficher(toStringHex(binaire4)));

        //infos.setText(getAfficher(toStringHex(binaire2))+"\n"+getAfficher(toStringHex(binaire1))+"\n"+getAfficher(toStringHex(binaire2)));
        //text1.setText(binaire.length()+" "+binaire1.length()+" "+binaire2.length());
    }

    public String getAfficher(String string){

        String resultat = "";
        for(int i = 100 ; i < string.length()-1 ; i ++){
            // binaire2 satisfait

            if(string.substring(i-29,i-17).equals("Anniversaire")){
                //resultat += string.substring(i-28,i-16)+" "+string.substring(i-1,i+1);
                if(string.substring(i-1,i).equals("h")){
                    resultat += string.substring(i-29,i-15)+" "+string.substring(i-1,i+1)+"\n";
                }
            }
            else if(string.substring(i-40,i-32).equals("Absences")){
                //resultat += string.substring(i-40,i-32)+" "+string.substring(i-1,i);
                if(string.substring(i-1,i).equals("h")){
                    resultat += string.substring(i-40,i-32)+" "+string.substring(i-1,i+1)+"\n";
                }
            }
            else if(string.substring(i-37,i-17).equals("EvaluationsRealisees")){
                //resultat += string.substring(i-37,i-17)+" "+string.substring(i-1,i);
                if(string.substring(i-1,i).equals("h")){
                    resultat += string.substring(i-37,i-17)+" "+string.substring(i-1,i)+"\n";
                }
            }
            else if(string.substring(i-37,i-25).equals("Informations")){
               // resultat += string.substring(i-37,i-25) + " "+ string.substring(i-1,i);
                if(string.substring(i-1,i).equals("h")){
                    resultat += string.substring(i-37,i-25) + " "+ string.substring(i-1,i)+"\n";
                }
            }
            else if(string.substring(i-35,i-17).equals("AgendaNonProgramme")){
                //resultat += string.substring(i-35,i-17) + " "+ string.substring(i-1,i);
                if(string.substring(i-1,i).equals("h")){
                    resultat += string.substring(i-35,i-17) + " "+ string.substring(i-1,i)+"\n";
                }
            }
            else if(string.substring(i-33,i-17).equals("OrdonnancesFalse")){
                //resultat += string.substring(i-33,i-17) + " "+ string.substring(i-1,i)+"\n";
                if(string.substring(i-1,i).equals("h")){
                    resultat += string.substring(i-33,i-17) + " "+ string.substring(i-1,i)+"\n";
                }

            }
            else if(string.substring(i-31,i-16).equals("OrdonnancesTrue")){
                //resultat += string.substring(i-31,i-16) + " "+ string.substring(i-1,i)+"\n";
                if(string.substring(i-1,i).equals("h")){
                    resultat += string.substring(i-31,i-16) + " "+ string.substring(i-1,i)+"\n";
                }
            }
            else if(string.substring(i-26,i-16).equals("DateLimite")){
                //resultat += string.substring(i-26,i-16) + " "+ string.substring(i-1,i)+"\n";
                if(string.substring(i-1,i).equals("h")){
                    resultat += string.substring(i-26,i-16) + " "+ string.substring(i-1,i)+"\n";
                }
            }
            else if(string.substring(i-31,i-16).equals("ResultatAnalyse")){
                //resultat += string.substring(i-26,i-16) + " "+ string.substring(i-1,i)+"\n";
                if(string.substring(i-1,i).equals("h")){
                    resultat += string.substring(i-26,i-16) + " "+ string.substring(i-1,i)+"\n";
                }
            }
            else if(string.substring(i-22,i-16).equals("Agenda")){
                //resultat += string.substring(i-22,i-16) + " "+ string.substring(i-1,i)+"\n";
                if(string.substring(i-1,i).equals("h")){
                    resultat += string.substring(i-22,i-16) + " "+ string.substring(i-1,i)+"\n";
                }
            }
            else if(string.substring(i-34,i-20).equals("ListeResidants")){
               // resultat += string.substring(i-34,i-20) + " "+ string.substring(i-1,i)+"\n";
                if(string.substring(i-1,i).equals("h")){
                    resultat += string.substring(i-34,i-20) + " "+ string.substring(i-1,i)+"\n";
                }
            }
            else if(string.substring(i-38,i-17).equals("TransmissionNarrative")){
                //resultat += string.substring(i-38,i-17) + " "+ string.substring(i-1,i)+"\n";
                if(string.substring(i-1,i).equals("h")){
                    resultat += string.substring(i-38,i-17) + " "+ string.substring(i-1,i)+"\n";
                }
            }
            else if(string.substring(i-37,i-17).equals("TransmissionsCiblees")){
               // resultat += string.substring(i-37,i-17) + " "+ string.substring(i-1,i)+"\n";
                if(string.substring(i-1,i).equals("h")){
                    resultat += string.substring(i-38,i-17) + " "+ string.substring(i-1,i)+"\n";
                }
            }
            else if(string.substring(i-23,i-17).equals("Chutes")){
               //resultat += string.substring(i-23,i-17) + " "+ string.substring(i-1,i)+"\n";
                if(string.substring(i-1,i).equals("h")){
                    resultat += string.substring(i-23,i-17) + " "+ string.substring(i-1,i)+"\n";
                }
            }
            else if (string.substring(i-25,i-17).equals("Escarres")){
                //resultat += string.substring(i-25,i-17) + " "+ string.substring(i-1,i)+"\n";
                if(string.substring(i-1,i).equals("h")){
                    resultat += string.substring(i-23,i-17) + " "+ string.substring(i-1,i)+"\n";
                }
            }
            else if(string.substring(i-34,i-17).equals("SoinsNonPlanifies")){
                //resultat += string.substring(i-37,i-17) + " "+ string.substring(i-1,i)+"\n";
                if(string.substring(i-1,i).equals("h")){
                    resultat += string.substring(i-25,i-17) + " "+ string.substring(i-1,i)+"\n";
                }
            }
            else if(string.substring(i-32,i-17).equals("SoinsNongeneres")){
                //resultat += string.substring(i-32,i-17) + " "+ string.substring(i-1,i)+"\n";
                if(string.substring(i-1,i).equals("h")){
                    resultat += string.substring(i-37,i-17) + " "+ string.substring(i-1,i)+"\n";
                }
            }
        }

        return resultat;
    }

    public String toStringHex(String s)
    {
        byte[] baKeyword = new byte[s.length()/2];
        for(int i = 0; i < baKeyword.length; i++)
        {
            try
            {
                baKeyword[i] = (byte)(0xff & Integer.parseInt(s.substring(i*2, i*2+2),16));
            }
            catch(Exception e)
            {
                e.printStackTrace();
            }
        }

        try
        {
            s = new String(baKeyword, "utf-8");//UTF-16le:Not
        }
        catch (Exception e1)
        {
            e1.printStackTrace();
        }
        return s;
    }
}
